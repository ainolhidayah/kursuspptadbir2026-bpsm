<!DOCTYPE html>
<html lang="ms">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Slaid Slot 4 - Peserta (Versi Final)</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&family=Outfit:wght@300;400;600;800&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Poppins', sans-serif; overflow: hidden; }
        .slide-enter { animation: slideIn 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        @keyframes slideIn {
            from { opacity: 0; transform: scale(0.98) translateY(10px); }
            to { opacity: 1; transform: scale(1) translateY(0); }
        }
        
        /* Animations */
        @keyframes dropCoin {
            0% { transform: translateY(-100px) rotate(0deg); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateY(0) rotate(360deg); opacity: 0; }
        }
        .coin-drop { animation: dropCoin 1s ease-out forwards; }

        @keyframes growBar {
            from { height: 0; }
            to { height: var(--height); }
        }
        .animate-bar { animation: growBar 1.5s ease-out forwards; }

        .conflict-card:hover { transform: translateY(-10px); }
        
        /* Card Flip Animation */
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }

        /* Pie Chart Hover Effects */
        .pie-slice { transition: transform 0.3s ease, opacity 0.3s ease; cursor: pointer; }
        .pie-slice:hover { transform: scale(1.05); opacity: 0.9; }
        
        /* Scrollbar */
        ::-webkit-scrollbar { width: 8px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #a78bfa; border-radius: 4px; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 transition-colors duration-500" id="mainBody">

    <!-- Header / Progress Bar -->
    <div class="absolute top-0 left-0 w-full p-6 flex justify-between items-center z-20 pointer-events-none">
        <div class="text-base font-bold tracking-widest text-slate-500 bg-white/90 px-6 py-2 rounded-full backdrop-blur-sm shadow-md border border-slate-200" id="slideCounter">
            SLOT 4 / SLAID 1
        </div>
        <div class="flex gap-1 pointer-events-auto" id="progressBar">
            <!-- Progress bars injected via JS -->
        </div>
    </div>

    <!-- Main Content Area -->
    <main class="w-full h-screen px-6 md:px-20 flex flex-col justify-center relative z-10 pt-20 pb-24" id="slideContainer">
        <!-- Content injected via JS -->
    </main>

    <!-- Footer Navigation -->
    <div class="absolute bottom-0 left-0 w-full p-6 flex justify-between items-center z-20 pointer-events-none">
        <button onclick="prevSlide()" id="btnPrev" class="pointer-events-auto flex items-center gap-3 px-8 py-4 rounded-xl font-bold text-lg transition-all hover:bg-slate-200 text-slate-600 opacity-50 cursor-not-allowed shadow-sm">
            <i data-lucide="arrow-left" width="24"></i> Sebelumnya
        </button>

        <button onclick="nextSlide()" id="btnNext" class="pointer-events-auto flex items-center gap-3 px-8 py-4 rounded-xl font-bold text-lg transition-all bg-purple-700 text-white hover:bg-purple-800 shadow-xl hover:shadow-purple-300 hover:-translate-y-1">
            Seterusnya <i data-lucide="arrow-right" width="24"></i>
        </button>
    </div>

    <script>
        // Data Slaid Slot 4 (Gabungan Lengkap)
        const slides = [
            // --- BAHAGIAN 1: ASAS KEPIMPINAN ---
            {
                id: 1,
                type: "title",
                title: "KETRAMPILAN KEPIMPINAN",
                subtitle: "SLOT 4: 11.00 PAGI - 1.00 TGH HARI",
                content: "Gaya Situasional, Komunikasi & Pengaruh",
                bgColor: "bg-gradient-to-br from-indigo-950 to-purple-900",
                textColor: "text-white"
            },
            {
                id: 2,
                type: "boss_leader_interactive", 
                title: "BOSS vs LEADER",
                subtitle: "Pilih Mod Untuk Lihat Perbezaan",
                bgColor: "bg-white",
                textColor: "text-slate-900",
            },
            {
                id: 3,
                type: "myth",
                title: "MITOS KEPIMPINAN",
                subtitle: "Pangkat vs Pengaruh",
                bgColor: "bg-slate-100",
                textColor: "text-slate-900"
            },
            {
                id: 4,
                type: "quadrant",
                title: "4 GAYA KEPIMPINAN",
                subtitle: "Klik Kad Untuk Info (Teori Hersey-Blanchard)",
                bgColor: "bg-purple-50",
                textColor: "text-purple-900"
            },
            {
                id: 5,
                type: "game",
                title: "DOKTOR KEPIMPINAN",
                subtitle: "Aktiviti Interaktif: Pilih 'Ubat' Yang Sesuai",
                bgColor: "bg-indigo-900",
                textColor: "text-white",
                scenarios: [
                    { 
                        text: "Staf baharu lapor diri hari pertama. Tak tahu guna sistem.", 
                        correct: "DIRECTING", 
                        reason: "Mereka perlukan arahan jelas, bukan delegasi."
                    },
                    { 
                        text: "Pn. Salmah (15 tahun kerja) sangat cekap, tapi minggu ni murung masalah keluarga.", 
                        correct: "SUPPORTING", 
                        reason: "Dia tahu buat kerja, cuma emosi terganggu. Perlukan sokongan."
                    },
                    { 
                        text: "En. Chong proaktif, selalu siap kerja awal & sempurna.", 
                        correct: "DELEGATING", 
                        reason: "Jangan kacau orang pakar. Beri kepercayaan."
                    },
                    {
                        text: "Staf baru dinaikkan pangkat, bersemangat tapi belum mahir urus pasukan.",
                        correct: "COACHING",
                        reason: "Perlukan bimbingan untuk kemahiran baru, tapi semangat dah ada."
                    },
                    {
                        text: "Pegawai lama yang tiba-tiba prestasi merosot dan mula kerap MC.",
                        correct: "SUPPORTING",
                        reason: "Perlukan sokongan emosi, bukan arahan kerja."
                    },
                    {
                        text: "Projek 'urgent' perlu siap esok, tiada masa untuk ajar.",
                        correct: "DIRECTING",
                        reason: "Keadaan cemas perlukan arahan pantas (Authoritative)."
                    }
                ]
            },
            
            // --- BAHAGIAN 2: KOMUNIKASI & KONFLIK ---
            {
                id: 6,
                type: "section_break",
                title: "KOMUNIKASI BERPENGARUH",
                subtitle: "Seni Memenangi Hati",
                bgColor: "bg-teal-900",
                textColor: "text-white"
            },
            {
                id: 7,
                type: "hook_mehrabian_svg", 
                title: "APA YANG ORANG DENGAR?",
                subtitle: "Hukum Mehrabian (7-38-55) - Klik Carta Pai",
                bgColor: "bg-white",
                textColor: "text-slate-900"
            },
            {
                id: 8,
                type: "active_listening",
                title: "JENIS PENDENGARAN",
                subtitle: "Telinga vs Hati",
                bgColor: "bg-teal-50",
                textColor: "text-teal-900"
            },
            {
                id: 9,
                type: "zoo",
                title: "ZOO KONFLIK",
                subtitle: "Kenali Gaya Anda",
                bgColor: "bg-orange-50",
                textColor: "text-orange-900",
                animals: [
                    { name: "JERUNG", style: "Competing", desc: "'Cara aku atau kau keluar.'", icon: "sword", color: "bg-red-500" },
                    { name: "KURA-KURA", style: "Avoiding", desc: "'Tak apa lah, malas gaduh.'", icon: "shield-off", color: "bg-green-500" },
                    { name: "TEDDY BEAR", style: "Accommodating", desc: "'Ikut awak lah, asalkan bahagia.'", icon: "heart", color: "bg-pink-500" },
                    { name: "MUSANG", style: "Compromising", desc: "'Kita bahagi dua, adil.'", icon: "scissors", color: "bg-orange-500" },
                    { name: "BURUNG HANTU", style: "Collaborating", desc: "'Jom cari jalan puaskan hati kita berdua.'", icon: "glasses", color: "bg-blue-600" }
                ]
            },
            {
                id: 10,
                type: "emergency_protocol", 
                title: "SITUASI CEMAS: PROTOKOL 3T",
                subtitle: "Bila Keadaan Menjadi Tegang",
                bgColor: "bg-slate-800",
                textColor: "text-white"
            },
            {
                id: 11,
                type: "simulation",
                title: "SIMULASI: ANGRY STAF",
                subtitle: "Pilih Respon Terbaik (6 Situasi)",
                bgColor: "bg-slate-900",
                textColor: "text-white",
                scenarios: [
                    {
                        context: "Cikgu A menyerbu bilik: 'Kenapa claim saya tak masuk lagi?! Pejabat ni tidur ke?!'",
                        options: [
                            { text: "'Cikgu jangan kurang ajar! Keluar!'", type: "WRONG", feedback: "Eskalasi! Dia akan lebih marah." },
                            { text: "'Maaf cikgu, saya nampak cikgu marah. Mari kita semak sama-sama.'", type: "RIGHT", feedback: "Tepat! Validasi emosi dahulu." }
                        ]
                    },
                    {
                        context: "Staf B menangis di meja: 'Saya tak tahan dah, kerja banyak sangat!'",
                        options: [
                            { text: "'Sabarlah, semua orang pun banyak kerja.'", type: "WRONG", feedback: "Dismissive. Dia rasa tidak didengar." },
                            { text: "'Nampak berat beban awak. Jom bincang mana boleh kita susun semula.'", type: "RIGHT", feedback: "Empati + Solusi." }
                        ]
                    },
                    {
                        context: "Dua staf bergaduh jerit-menjerit di pantri.",
                        options: [
                            { text: "Tengok saja dari jauh (takut masuk campur).", type: "WRONG", feedback: "Pasif. Konflik akan merebak." },
                            { text: "Leraikan segera: 'Stop! Balik meja masing-masing. Jumpa saya 5 minit lagi.'", type: "RIGHT", feedback: "Tegas & Mengawal keadaan." }
                        ]
                    },
                    {
                        context: "Bos panggil mesyuarat mengejut 4:30 petang, staf merungut nak balik.",
                        options: [
                            { text: "'Ikut arahan bos je la, jangan banyak bunyi.'", type: "WRONG", feedback: "Mematikan semangat." },
                            { text: "'Saya faham ini last minute. Kita fokus agenda penting je supaya boleh balik cepat.'", type: "RIGHT", feedback: "Memahami & Praktikal." }
                        ]
                    },
                    {
                        context: "Ibu bapa mengamuk di kaunter pasal yuran.",
                        options: [
                            { text: "Bawa masuk bilik tertutup & tawarkan air.", type: "RIGHT", feedback: "Mengasingkan punca bising & menyejukkan hati." },
                            { text: "Bertekak di kaunter untuk pertahankan staf.", type: "WRONG", feedback: "Memalukan semua pihak di tempat awam." }
                        ]
                    },
                    {
                        context: "Rakan sejawat mengata anda di belakang (Gossip).",
                        options: [
                            { text: "Serang dia depan orang ramai.", type: "WRONG", feedback: "Tidak profesional." },
                            { text: "Jumpa empat mata: 'Saya dengar cerita ni, betul ke awak cakap?'", type: "RIGHT", feedback: "Konfrontasi sihat & matang." }
                        ]
                    }
                ]
            },
            {
                id: 12,
                type: "technique",
                title: "TEKNIK SANDWICH",
                subtitle: "Menegur Tanpa Melukakan",
                bgColor: "bg-yellow-50",
                textColor: "text-yellow-900"
            },
            {
                id: 13,
                type: "iceberg",
                title: "FENOMENA AISBERG",
                subtitle: "Apa Yang Tersirat",
                bgColor: "bg-cyan-900",
                textColor: "text-white"
            },

            // --- BAHAGIAN 3: KREDIBILITI & PENUTUP ---
            {
                id: 14,
                type: "bank",
                title: "AKAUN BANK EMOSI",
                subtitle: "Leading Without Authority",
                bgColor: "bg-white",
                textColor: "text-slate-900"
            },
            {
                id: 15,
                type: "credibility_interactive", 
                title: "3K KREDIBILITI",
                subtitle: "Klik Kad Untuk Info",
                bgColor: "bg-slate-900",
                textColor: "text-white"
            },
            {
                id: 16,
                type: "dilemma",
                title: "KAJIAN KES: DILEMA PENYELIA",
                subtitle: "Ujian Integriti",
                bgColor: "bg-red-50",
                textColor: "text-red-900"
            },
            {
                id: 17,
                type: "closing",
                title: "PEMIMPIN IDOLA",
                subtitle: "Refleksi Akhir",
                bgColor: "bg-purple-950",
                textColor: "text-amber-400"
            }
        ];

        let currentSlide = 0;
        
        // State management
        let bossMode = false;
        let currentScenarioIndex = 0;
        let currentSimIndex = 0; 
        let bankBalance = 50;
        let simStep = 0; 
        let activePieSlice = null;
        let gameFeedback = ""; // Store feedback text for the game
        let isGameCorrect = false; // Store correctness for the game

        function renderSlide() {
            const slide = slides[currentSlide];
            const container = document.getElementById('slideContainer');
            const body = document.getElementById('mainBody');
            
            // Reset states specific to slides if leaving/entering fresh
            if(slide.id !== 5) {
                // Keep game state if we just navigated away and back? 
                // For simplicity, let's keep state unless page refresh, but UI re-renders based on index.
            }

            if(slide.id !== 11) {
                // Keep sim state
            }
            
            if(slide.id !== 7) activePieSlice = null;
            
            // Update Body Classes
            body.className = `w-full h-screen flex flex-col transition-colors duration-700 font-sans ${slide.bgColor} ${slide.textColor}`;

            let contentHtml = '';

            if (slide.type === 'title') {
                contentHtml = `
                <div class="flex flex-col items-center text-center slide-enter px-4">
                    <div class="mb-8 p-8 bg-amber-500 rounded-full shadow-[0_0_50px_rgba(245,158,11,0.5)] animate-pulse">
                        <i data-lucide="crown" width="80" height="80" class="text-white"></i>
                    </div>
                    <h1 class="text-4xl md:text-7xl font-black mb-6 tracking-tighter leading-tight text-transparent bg-clip-text bg-gradient-to-r from-amber-200 to-yellow-500">
                        ${slide.title}
                    </h1>
                    <div class="flex items-center justify-center gap-4 text-purple-200 font-bold mb-10 border border-purple-500/30 py-2 px-8 rounded-full bg-white/10 backdrop-blur-md">
                        <span class="text-lg uppercase tracking-[0.2em]">${slide.subtitle}</span>
                    </div>
                    <p class="text-xl text-slate-300 max-w-2xl mx-auto font-light">
                        ${slide.content}
                    </p>
                </div>`;
            } else if (slide.type === 'boss_leader_interactive') {
                contentHtml = `
                <div class="flex flex-col h-full justify-center items-center slide-enter w-full max-w-6xl mx-auto px-4">
                    <div class="flex items-center gap-4 mb-8 bg-slate-100 p-2 rounded-full shadow-inner">
                        <button onclick="setBossMode(false)" class="px-8 py-3 rounded-full font-bold transition-all ${!bossMode ? 'bg-red-600 text-white shadow-lg scale-105' : 'text-slate-500 hover:text-slate-800'}">BOSS</button>
                        <button onclick="setBossMode(true)" class="px-8 py-3 rounded-full font-bold transition-all ${bossMode ? 'bg-green-600 text-white shadow-lg scale-105' : 'text-slate-500 hover:text-slate-800'}">LEADER</button>
                    </div>

                    <div class="relative w-full aspect-video md:aspect-[21/9] bg-white rounded-3xl overflow-hidden shadow-2xl border-4 ${bossMode ? 'border-green-500' : 'border-red-500'} transition-colors duration-500">
                        <!-- BOSS CONTENT -->
                        <div class="absolute inset-0 flex flex-col md:flex-row items-center justify-center p-8 gap-12 transition-all duration-500 ${bossMode ? 'opacity-0 translate-x-full pointer-events-none' : 'opacity-100 translate-x-0'}">
                            <div class="flex-1 text-center">
                                <div class="bg-red-100 w-32 h-32 rounded-full flex items-center justify-center mx-auto mb-6">
                                    <i data-lucide="megaphone" width="64" height="64" class="text-red-600"></i>
                                </div>
                                <h2 class="text-5xl font-black text-red-800 mb-2">"GO!"</h2>
                                <p class="text-xl text-red-600 font-medium">Mengarahkan dari belakang.</p>
                            </div>
                            <div class="flex-1 space-y-4 border-l-2 border-slate-100 pl-8 text-left">
                                <div class="flex items-center gap-3"><i data-lucide="x-circle" class="text-red-500"></i> <span class="text-slate-600">Guna kuasa mutlak</span></div>
                                <div class="flex items-center gap-3"><i data-lucide="x-circle" class="text-red-500"></i> <span class="text-slate-600">Timbulkan ketakutan</span></div>
                                <div class="flex items-center gap-3"><i data-lucide="x-circle" class="text-red-500"></i> <span class="text-slate-600">Ambil kredit kejayaan</span></div>
                                <div class="flex items-center gap-3"><i data-lucide="x-circle" class="text-red-500"></i> <span class="text-slate-600">Menyalahkan bila gagal</span></div>
                            </div>
                        </div>

                        <!-- LEADER CONTENT -->
                        <div class="absolute inset-0 flex flex-col md:flex-row items-center justify-center p-8 gap-12 transition-all duration-500 ${!bossMode ? 'opacity-0 -translate-x-full pointer-events-none' : 'opacity-100 translate-x-0'}">
                            <div class="flex-1 text-center">
                                <div class="bg-green-100 w-32 h-32 rounded-full flex items-center justify-center mx-auto mb-6">
                                    <i data-lucide="handshake" width="64" height="64" class="text-green-600"></i>
                                </div>
                                <h2 class="text-5xl font-black text-green-800 mb-2">"LET'S GO!"</h2>
                                <p class="text-xl text-green-600 font-medium">Bergerak bersama-sama.</p>
                            </div>
                            <div class="flex-1 space-y-4 border-l-2 border-slate-100 pl-8 text-left">
                                <div class="flex items-center gap-3"><i data-lucide="check-circle" class="text-green-500"></i> <span class="text-slate-600">Guna pengaruh & hormat</span></div>
                                <div class="flex items-center gap-3"><i data-lucide="check-circle" class="text-green-500"></i> <span class="text-slate-600">Membina keyakinan</span></div>
                                <div class="flex items-center gap-3"><i data-lucide="check-circle" class="text-green-500"></i> <span class="text-slate-600">Memberi kredit kpd tim</span></div>
                                <div class="flex items-center gap-3"><i data-lucide="check-circle" class="text-green-500"></i> <span class="text-slate-600">Memikul tanggungjawab</span></div>
                            </div>
                        </div>
                    </div>
                </div>`;
            } else if (slide.type === 'myth') {
                contentHtml = `
                <div class="flex flex-col items-center justify-center h-full gap-10 slide-enter px-4">
                    <h2 class="text-4xl md:text-6xl font-black text-slate-800 text-center">MITOS vs FAKTA</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 w-full max-w-5xl">
                        <div class="bg-white p-10 rounded-3xl shadow-lg border-l-8 border-red-500 relative overflow-hidden group">
                             <div class="absolute top-4 right-4 text-red-100 font-black text-8xl opacity-50 select-none">X</div>
                             <h3 class="text-red-500 font-bold text-xl mb-2 uppercase tracking-widest">Mitos Biasa</h3>
                             <p class="text-3xl font-medium text-slate-700 leading-snug">"Saya gred rendah, saya tak boleh memimpin."</p>
                        </div>
                        <div class="bg-white p-10 rounded-3xl shadow-lg border-l-8 border-green-500 relative overflow-hidden group">
                             <div class="absolute top-4 right-4 text-green-100 font-black text-8xl opacity-50 select-none">âœ“</div>
                             <h3 class="text-green-600 font-bold text-xl mb-2 uppercase tracking-widest">Fakta Sebenar</h3>
                             <p class="text-3xl font-medium text-slate-700 leading-snug">Kepimpinan adalah tentang <span class="text-green-600 font-bold bg-green-100 px-2">PENGARUH</span>, bukan pangkat.</p>
                        </div>
                    </div>
                </div>`;
            } else if (slide.type === 'quadrant') {
                contentHtml = `
                <div class="flex flex-col items-center justify-center h-full slide-enter w-full max-w-6xl mx-auto px-4">
                    <div class="text-center mb-8">
                        <h2 class="text-4xl font-black text-purple-900 mb-2">KEPIMPINAN SITUASIONAL</h2>
                        <p class="text-purple-600 text-xl">Klik kad untuk lihat penjelasan.</p>
                    </div>
                    <div class="grid grid-cols-2 gap-4 md:gap-6 w-full h-[500px]">
                        <!-- Directing -->
                        <div class="relative w-full h-full perspective-1000 group cursor-pointer" onclick="this.querySelector('.card-inner').classList.toggle('rotate-y-180')">
                            <div class="card-inner relative w-full h-full text-center transition-transform duration-700 transform-style-3d">
                                <div class="absolute w-full h-full backface-hidden bg-red-100 rounded-2xl flex flex-col items-center justify-center p-4 border-2 border-red-200">
                                    <i data-lucide="navigation" width="48" height="48" class="text-red-500 mb-4"></i>
                                    <h3 class="text-2xl font-black uppercase text-slate-800">1. Directing</h3>
                                    <p class="text-sm font-bold opacity-70 text-slate-600">ARAHAN</p>
                                </div>
                                <div class="absolute w-full h-full backface-hidden bg-red-600 rounded-2xl flex flex-col items-center justify-center p-6 text-white rotate-y-180">
                                    <h4 class="font-bold text-lg mb-2">Untuk Staf Baharu</h4>
                                    <p class="text-sm">Arahan Jelas (A->B->C). Bukan garang, tapi memandu.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Coaching -->
                        <div class="relative w-full h-full perspective-1000 group cursor-pointer" onclick="this.querySelector('.card-inner').classList.toggle('rotate-y-180')">
                            <div class="card-inner relative w-full h-full text-center transition-transform duration-700 transform-style-3d">
                                <div class="absolute w-full h-full backface-hidden bg-orange-100 rounded-2xl flex flex-col items-center justify-center p-4 border-2 border-orange-200">
                                    <i data-lucide="compass" width="48" height="48" class="text-orange-500 mb-4"></i>
                                    <h3 class="text-2xl font-black uppercase text-slate-800">2. Coaching</h3>
                                    <p class="text-sm font-bold opacity-70 text-slate-600">MEMBUKA POTENSI</p>
                                </div>
                                <div class="absolute w-full h-full backface-hidden bg-orange-500 rounded-2xl flex flex-col items-center justify-center p-6 text-white rotate-y-180">
                                    <h4 class="font-bold text-lg mb-2">Definisi Coaching</h4>
                                    <p class="text-sm">Membuka potensi diri staf untuk memaksimumkan prestasi mereka. Bukan sekadar mengajar.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Supporting -->
                        <div class="relative w-full h-full perspective-1000 group cursor-pointer" onclick="this.querySelector('.card-inner').classList.toggle('rotate-y-180')">
                            <div class="card-inner relative w-full h-full text-center transition-transform duration-700 transform-style-3d">
                                <div class="absolute w-full h-full backface-hidden bg-blue-100 rounded-2xl flex flex-col items-center justify-center p-4 border-2 border-blue-200">
                                    <i data-lucide="life-buoy" width="48" height="48" class="text-blue-500 mb-4"></i>
                                    <h3 class="text-2xl font-black uppercase text-slate-800">3. Supporting</h3>
                                    <p class="text-sm font-bold opacity-70 text-slate-600">SOKONGAN</p>
                                </div>
                                <div class="absolute w-full h-full backface-hidden bg-blue-500 rounded-2xl flex flex-col items-center justify-center p-6 text-white rotate-y-180">
                                    <h4 class="font-bold text-lg mb-2">Untuk Staf Hilang Semangat</h4>
                                    <p class="text-sm">Dengar masalah, beri motivasi. Mereka pandai tapi tak yakin.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Delegating -->
                        <div class="relative w-full h-full perspective-1000 group cursor-pointer" onclick="this.querySelector('.card-inner').classList.toggle('rotate-y-180')">
                            <div class="card-inner relative w-full h-full text-center transition-transform duration-700 transform-style-3d">
                                <div class="absolute w-full h-full backface-hidden bg-green-100 rounded-2xl flex flex-col items-center justify-center p-4 border-2 border-green-200">
                                    <i data-lucide="award" width="48" height="48" class="text-green-500 mb-4"></i>
                                    <h3 class="text-2xl font-black uppercase text-slate-800">4. Delegating</h3>
                                    <p class="text-sm font-bold opacity-70 text-slate-600">DELEGASI</p>
                                </div>
                                <div class="absolute w-full h-full backface-hidden bg-green-600 rounded-2xl flex flex-col items-center justify-center p-6 text-white rotate-y-180">
                                    <h4 class="font-bold text-lg mb-2">Untuk Top Performer</h4>
                                    <p class="text-sm">Serah tugas, tunggu hasil. Mereka pakar & yakin.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>`;
            } else if (slide.type === 'game') {
                const scenario = slide.scenarios[currentScenarioIndex];
                contentHtml = `
                <div class="flex flex-col items-center justify-center h-full slide-enter w-full max-w-4xl mx-auto px-4">
                    <div class="flex items-center gap-3 mb-6 bg-white/10 px-6 py-2 rounded-full justify-between w-full">
                        <button onclick="prevGameScenario()" class="text-white hover:text-amber-300 transition-colors ${currentScenarioIndex === 0 ? 'opacity-30 cursor-not-allowed' : ''}" ${currentScenarioIndex === 0 ? 'disabled' : ''}>
                            <i data-lucide="arrow-left-circle" width="32"></i>
                        </button>
                        <div class="flex items-center gap-2">
                            <i data-lucide="stethoscope" class="text-amber-400"></i>
                            <span class="text-amber-200 font-bold tracking-widest uppercase">Pesakit ${currentScenarioIndex + 1} / 6</span>
                        </div>
                        <button onclick="nextGameScenario()" id="btnNextGame" class="text-white hover:text-amber-300 transition-colors opacity-30 cursor-not-allowed" disabled>
                            <i data-lucide="arrow-right-circle" width="32"></i>
                        </button>
                    </div>
                    <div class="bg-white text-slate-900 p-10 rounded-3xl shadow-2xl text-center w-full mb-10 relative overflow-hidden min-h-[250px] flex items-center justify-center" id="scenarioCard">
                        <div class="absolute top-0 left-0 w-full h-2 bg-gradient-to-r from-amber-400 to-purple-500"></div>
                        <div>
                            <h3 class="text-2xl md:text-3xl font-bold leading-relaxed mb-4">"${scenario.text}"</h3>
                            <p class="text-slate-500 italic">Apakah gaya kepimpinan (ubat) yang paling sesuai?</p>
                        </div>
                    </div>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 w-full">
                        <button onclick="checkAnswer('DIRECTING')" class="p-4 bg-slate-800 hover:bg-red-500 rounded-xl font-bold text-white transition-all border border-slate-600 hover:scale-105 shadow-lg">DIRECTING</button>
                        <button onclick="checkAnswer('COACHING')" class="p-4 bg-slate-800 hover:bg-orange-500 rounded-xl font-bold text-white transition-all border border-slate-600 hover:scale-105 shadow-lg">COACHING</button>
                        <button onclick="checkAnswer('SUPPORTING')" class="p-4 bg-slate-800 hover:bg-blue-500 rounded-xl font-bold text-white transition-all border border-slate-600 hover:scale-105 shadow-lg">SUPPORTING</button>
                        <button onclick="checkAnswer('DELEGATING')" class="p-4 bg-slate-800 hover:bg-green-500 rounded-xl font-bold text-white transition-all border border-slate-600 hover:scale-105 shadow-lg">DELEGATING</button>
                    </div>
                    <div id="feedbackResult" class="hidden mt-6 text-xl font-bold text-amber-400 animate-bounce"></div>
                </div>`;
            } else if (slide.type === 'section_break') {
                contentHtml = `
                <div class="flex flex-col items-center justify-center h-full text-center slide-enter px-4">
                    <div class="mb-8 p-6 bg-teal-500/20 rounded-full animate-pulse">
                        <i data-lucide="message-circle" width="100" height="100" class="text-teal-300"></i>
                    </div>
                    <h2 class="text-5xl md:text-7xl font-black text-white mb-4 tracking-tight">${slide.title}</h2>
                    <p class="text-2xl text-teal-200 font-light uppercase tracking-widest border-t border-teal-700 pt-6 mt-2">${slide.subtitle}</p>
                </div>`;
            } else if (slide.type === 'hook_mehrabian_svg') {
                contentHtml = `
                <div class="flex flex-col items-center justify-center h-full slide-enter w-full max-w-6xl mx-auto px-4">
                    <div class="text-center mb-8">
                        <h2 class="text-4xl md:text-5xl font-black text-slate-800 mb-2">HUKUM MEHRABIAN</h2>
                        <p class="text-slate-500 text-lg">Klik pada setiap bahagian carta untuk maklumat.</p>
                    </div>
                    
                    <div class="flex flex-col md:flex-row items-center justify-center gap-16 w-full">
                        <!-- SVG Interactive Pie Chart -->
                        <div class="relative w-80 h-80 drop-shadow-2xl">
                            <svg viewBox="0 0 100 100" class="w-full h-full transform -rotate-90">
                                <!-- 55% Slice (Bahasa Badan) -->
                                <path d="M 50 50 L 50 0 A 50 50 0 1 1 17.5 90.5 Z" fill="#ef4444" 
                                    class="pie-slice hover:brightness-110" onclick="showPieInfo('body')"></path>
                                
                                <!-- 38% Slice (Nada Suara) -->
                                <path d="M 50 50 L 17.5 90.5 A 50 50 0 0 1 29.3 4.5 Z" fill="#14b8a6" 
                                    class="pie-slice hover:brightness-110" onclick="showPieInfo('tone')"></path>
                                
                                <!-- 7% Slice (Perkataan) -->
                                <path d="M 50 50 L 29.3 4.5 A 50 50 0 0 1 50 0 Z" fill="#cbd5e1" 
                                    class="pie-slice hover:brightness-110" onclick="showPieInfo('words')"></path>
                                
                                <!-- Inner Circle -->
                                <circle cx="50" cy="50" r="25" fill="white" />
                            </svg>
                            <div class="absolute inset-0 flex items-center justify-center pointer-events-none">
                                <i data-lucide="mouse-pointer-2" class="text-slate-300 animate-bounce"></i>
                            </div>
                        </div>

                        <!-- Dynamic Info Panel -->
                        <div id="pieInfoPanel" class="w-full md:w-96 min-h-[200px] flex items-center">
                            <div class="text-left space-y-4 animate-fade-in">
                                <h3 class="text-4xl font-black text-slate-800">KOMUNIKASI</h3>
                                <p class="text-slate-500 text-lg">Elemen manakah yang paling memberi kesan kepada pendengar?</p>
                                <div class="flex gap-2">
                                    <span class="w-4 h-4 bg-red-500 rounded-full inline-block"></span> Bahasa Badan
                                    <span class="w-4 h-4 bg-teal-500 rounded-full inline-block"></span> Nada
                                    <span class="w-4 h-4 bg-slate-300 rounded-full inline-block"></span> Perkataan
                                </div>
                            </div>
                        </div>
                    </div>
                </div>`;
            } else if (slide.type === 'active_listening') {
                contentHtml = `
                <div class="flex flex-col items-center justify-center h-full slide-enter px-4">
                    <h2 class="text-4xl md:text-5xl font-black text-teal-900 mb-12 text-center">JENIS PENDENGARAN</h2>
                    <div class="space-y-6 w-full max-w-4xl">
                        <div class="flex items-center gap-6 bg-white p-6 rounded-2xl shadow-sm opacity-50 hover:opacity-100 transition-opacity">
                            <div class="bg-slate-200 p-4 rounded-full"><i data-lucide="ear-off" class="text-slate-500"></i></div>
                            <div><h3 class="text-xl font-bold text-slate-700">1. MENDENGAR KOSONG</h3><p class="text-slate-500">Masuk telinga kanan, keluar kiri.</p></div>
                        </div>
                        <div class="flex items-center gap-6 bg-white p-6 rounded-2xl shadow-md hover:scale-105 transition-transform border-l-8 border-yellow-400">
                            <div class="bg-yellow-100 p-4 rounded-full"><i data-lucide="message-circle" class="text-yellow-600"></i></div>
                            <div><h3 class="text-xl font-bold text-yellow-800">2. MENDENGAR UNTUK MENJAWAB</h3><p class="text-slate-600">Dengar sambil susun ayat balas.</p></div>
                        </div>
                        <div class="flex items-center gap-6 bg-teal-600 p-8 rounded-2xl shadow-2xl hover:scale-105 transition-transform border-l-8 border-teal-300 transform translate-x-4">
                            <div class="bg-white p-4 rounded-full"><i data-lucide="heart-handshake" class="text-teal-600"></i></div>
                            <div><h3 class="text-2xl font-black text-white">3. MENDENGAR UNTUK MEMAHAMI</h3><p class="text-teal-100 text-lg">Empati. Dengar emosi di sebalik perkataan.</p></div>
                        </div>
                    </div>
                </div>`;
            } else if (slide.type === 'zoo') {
                contentHtml = `
                <div class="flex flex-col items-center justify-center h-full slide-enter w-full px-4">
                    <div class="text-center mb-8">
                        <h2 class="text-4xl font-black text-orange-900 mb-2">ZOO KONFLIK</h2>
                        <p class="text-orange-700">Klik kad untuk lihat strategi.</p>
                    </div>
                    <div class="grid grid-cols-2 md:grid-cols-5 gap-4 w-full max-w-7xl">
                        ${slide.animals.map(animal => `
                            <div class="conflict-card h-80 rounded-2xl overflow-hidden shadow-lg relative group cursor-pointer bg-white" onclick="alert('${animal.name} (${animal.style}): ${animal.desc}')">
                                <div class="${animal.color} h-1/2 flex items-center justify-center text-white"><i data-lucide="${animal.icon}" width="48" height="48"></i></div>
                                <div class="p-4 text-center h-1/2 flex flex-col justify-center">
                                    <h3 class="font-black text-lg mb-1">${animal.name}</h3>
                                    <p class="text-xs font-bold uppercase tracking-wider text-slate-400 mb-2">${animal.style}</p>
                                    <p class="text-sm text-slate-600 italic opacity-0 group-hover:opacity-100 transition-opacity">"${animal.desc}"</p>
                                </div>
                            </div>
                        `).join('')}
                    </div>
                    <div class="mt-8 text-center opacity-60 text-xs font-mono text-orange-900 bg-orange-100 px-4 py-1 rounded-full inline-block">
                        Sumber: Thomas-Kilmann Conflict Mode Instrument (TKI)
                    </div>
                </div>`;
            } else if (slide.type === 'emergency_protocol') {
                contentHtml = `
                <div class="flex flex-col items-center justify-center h-full slide-enter w-full max-w-5xl mx-auto px-4 text-center">
                    <div class="mb-10 bg-red-600 text-white p-6 rounded-full shadow-lg animate-pulse">
                        <i data-lucide="siren" width="64" height="64"></i>
                    </div>
                    <h2 class="text-5xl md:text-7xl font-black text-white mb-4 tracking-tight">PROTOKOL 3T</h2>
                    <p class="text-2xl text-slate-300 mb-12 uppercase tracking-widest">Bila Berhadapan Dengan Orang Mengamuk</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 w-full text-slate-900">
                        <div class="bg-white p-8 rounded-2xl shadow-xl hover:-translate-y-2 transition-transform">
                            <div class="text-6xl font-black text-slate-200 mb-4">1</div>
                            <h3 class="text-2xl font-bold text-blue-600 mb-2">TENANG</h3>
                            <p class="text-sm text-slate-600">Tarik nafas. Jangan ikut emosi marah dia. Kawal diri.</p>
                        </div>
                        <div class="bg-white p-8 rounded-2xl shadow-xl hover:-translate-y-2 transition-transform">
                            <div class="text-6xl font-black text-slate-200 mb-4">2</div>
                            <h3 class="text-2xl font-bold text-orange-500 mb-2">TAHAN</h3>
                            <p class="text-sm text-slate-600">Tahan diri dari menyampuk. Biar dia luah sampai habis.</p>
                        </div>
                        <div class="bg-white p-8 rounded-2xl shadow-xl hover:-translate-y-2 transition-transform">
                            <div class="text-6xl font-black text-slate-200 mb-4">3</div>
                            <h3 class="text-2xl font-bold text-green-600 mb-2">TINDAK</h3>
                            <p class="text-sm text-slate-600">Respon dengan nada rendah, empati & solusi (bukan alasan).</p>
                        </div>
                    </div>
                </div>`;
            } else if (slide.type === 'simulation') {
                const scenario = slide.scenarios[currentSimIndex];
                let simContent = '';
                
                if (simStep === 0) {
                    simContent = `
                        <div class="bg-white/10 p-8 rounded-3xl backdrop-blur border border-white/20 text-center max-w-4xl animate-fade-in w-full">
                            <div class="flex justify-between items-center mb-6">
                                <button onclick="prevSimScenario()" class="text-white hover:text-amber-300 transition-colors ${currentSimIndex === 0 ? 'opacity-30 cursor-not-allowed' : ''}" ${currentSimIndex === 0 ? 'disabled' : ''}>
                                    <i data-lucide="arrow-left-circle" width="32"></i>
                                </button>
                                <div class="flex items-center gap-4">
                                    <span class="text-amber-400 font-bold tracking-widest uppercase">Situasi ${currentSimIndex + 1} / 6</span>
                                    <div class="bg-red-600 text-white font-bold inline-block px-4 py-1 rounded-full animate-pulse">SITUASI CEMAS</div>
                                </div>
                                <button onclick="nextSimScenario()" id="btnNextSim" class="text-white hover:text-amber-300 transition-colors opacity-30 cursor-not-allowed" disabled>
                                    <i data-lucide="arrow-right-circle" width="32"></i>
                                </button>
                            </div>
                            <h3 class="text-2xl md:text-4xl font-bold mb-8 leading-tight">"${scenario.context}"</h3>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <button onclick="checkSimAnswer('${scenario.options[0].type}', 0)" class="p-6 bg-slate-800 hover:bg-slate-700 rounded-xl border border-slate-600 transition-all text-left group h-full flex flex-col justify-center">
                                    <span class="block text-xs text-slate-400 mb-2 group-hover:text-blue-300">PILIHAN A:</span>
                                    <span class="text-lg font-bold">"${scenario.options[0].text}"</span>
                                </button>
                                <button onclick="checkSimAnswer('${scenario.options[1].type}', 1)" class="p-6 bg-slate-800 hover:bg-slate-700 rounded-xl border border-slate-600 transition-all text-left group h-full flex flex-col justify-center">
                                    <span class="block text-xs text-slate-400 mb-2 group-hover:text-blue-300">PILIHAN B:</span>
                                    <span class="text-lg font-bold">"${scenario.options[1].text}"</span>
                                </button>
                            </div>
                        </div>`;
                } else if (simStep === 1) {
                    // Feedback logic using simLastChoiceIndex
                    const chosenOption = scenario.options[window.simLastChoiceIndex];
                    const isCorrect = chosenOption.type === "RIGHT";
                    
                    // Find correct option for display if wrong
                    const correctOption = scenario.options.find(opt => opt.type === "RIGHT");
                    
                    const bgClass = isCorrect ? "bg-emerald-900/90 border-emerald-500" : "bg-red-900/90 border-red-500";
                    const icon = isCorrect ? "check-circle" : "flame";
                    const title = isCorrect ? "TINDAKAN TEPAT!" : "ESKALASI BERLAKU!";
                    const textColor = isCorrect ? "text-emerald-400" : "text-red-500";
                    
                    simContent = `
                        <div class="${bgClass} p-10 rounded-3xl backdrop-blur border-4 text-center max-w-3xl animate-fade-in w-full">
                            <i data-lucide="${icon}" width="80" height="80" class="mx-auto ${textColor} mb-6"></i>
                            <h3 class="text-4xl font-black mb-4 text-white">${title}</h3>
                            <p class="text-xl text-white mb-2">"${chosenOption.feedback}"</p>
                            
                            ${!isCorrect ? `<div class="mt-4 p-4 bg-black/30 rounded-xl text-sm text-slate-300"><strong>Sepatutnya:</strong> "${correctOption.text}" (${correctOption.feedback})</div>` : ''}
                            
                            <div class="mt-8 flex justify-center gap-4">
                                <button onclick="resetSimScenario()" class="bg-slate-600 text-white px-6 py-3 rounded-full font-bold hover:bg-slate-500 flex items-center gap-2">
                                    <i data-lucide="rotate-ccw" width="20"></i> Ulang Semula
                                </button>
                                <button onclick="nextSimScenario()" class="bg-white text-slate-900 px-8 py-3 rounded-full font-bold hover:bg-slate-200 flex items-center gap-2">
                                    ${currentSimIndex < 5 ? 'Seterusnya <i data-lucide="arrow-right" width="20"></i>' : 'TAMAT <i data-lucide="check" width="20"></i>'}
                                </button>
                            </div>
                        </div>`;
                }
                contentHtml = `<div class="flex flex-col items-center justify-center h-full slide-enter px-4">${simContent}</div>`;
            } else if (slide.type === 'technique') {
                contentHtml = `
                <div class="flex flex-col items-center justify-center h-full slide-enter px-4">
                    <h2 class="text-5xl font-black text-yellow-900 mb-12">TEKNIK SANDWICH</h2>
                    <div class="flex flex-col gap-2 max-w-2xl w-full">
                        <div class="bg-amber-300 p-8 rounded-t-[3rem] text-center shadow-lg relative group hover:-translate-y-2 transition-transform">
                            <h3 class="text-2xl font-bold text-amber-900">PUJIAN / POSITIF</h3>
                            <p class="text-amber-800 italic">"Saya suka komitmen kerja awak selama ini..."</p>
                        </div>
                        <div class="bg-red-400 p-8 text-center shadow-lg relative group hover:scale-105 transition-transform z-10 mx-4 rounded-xl">
                            <h3 class="text-2xl font-bold text-white">TEGURAN / ISU</h3>
                            <p class="text-red-100 italic">"...cuma kebelakangan ini kehadiran agak lewat..."</p>
                        </div>
                        <div class="bg-amber-300 p-8 rounded-b-[3rem] text-center shadow-lg relative group hover:translate-y-2 transition-transform">
                            <h3 class="text-2xl font-bold text-amber-900">HARAPAN / SOKONGAN</h3>
                            <p class="text-amber-800 italic">"...saya yakin awak boleh perbaiki."</p>
                        </div>
                    </div>
                </div>`;
            } else if (slide.type === 'iceberg') {
                contentHtml = `
                <div class="flex flex-col items-center justify-center h-full slide-enter px-4">
                    <h2 class="text-4xl font-bold text-cyan-100 mb-8">FENOMENA AISBERG</h2>
                    <div class="relative w-full max-w-3xl h-[500px] flex justify-center perspective-1000">
                        <!-- Water Line -->
                        <div class="absolute top-1/3 w-full h-1 bg-cyan-400/50 z-20 border-t border-cyan-300 dashed"></div>
                        
                        <!-- Iceberg Top -->
                        <div class="absolute top-0 w-64 h-1/3 bg-white rounded-t-full flex items-center justify-center z-10 shadow-lg animate-float">
                            <div class="text-center text-slate-800 p-4">
                                <h3 class="font-black text-xl">TINGKAH LAKU</h3>
                                <p class="text-sm">(Apa yang kita nampak: Marah, Diam)</p>
                            </div>
                        </div>

                        <!-- Iceberg Bottom (Hidden/Deep) -->
                        <div class="absolute top-1/3 w-96 h-2/3 bg-cyan-600/80 rounded-b-full flex flex-col items-center pt-12 backdrop-blur-sm border-t border-white/20 group cursor-pointer transition-all duration-500 hover:bg-cyan-500 hover:scale-105">
                            <div class="text-center text-white p-4 space-y-6 opacity-60 group-hover:opacity-100 transition-opacity">
                                <div class="bg-white/10 p-3 rounded-lg">
                                    <h3 class="font-bold text-cyan-200">EMOSI</h3>
                                    <p class="text-sm">(Takut, Kecewa, Tertekan)</p>
                                </div>
                                <div class="bg-white/10 p-3 rounded-lg">
                                    <h3 class="font-bold text-cyan-200">NILAI / KEPERCAYAAN</h3>
                                    <p class="text-sm">(Rasa tidak dihargai, Masalah keluarga)</p>
                                </div>
                                <div class="bg-white/20 px-4 py-2 rounded-lg animate-pulse mt-4">
                                    <p class="text-xs font-italic">"Punca sebenar ada di bawah sini."</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>`;
            } else if (slide.type === 'bank') {
                contentHtml = `
                <div class="flex flex-col items-center justify-center h-full slide-enter px-4">
                    <div class="text-center mb-10">
                        <h2 class="text-4xl md:text-5xl font-black text-slate-800 mb-2">BANK AKAUN EMOSI</h2>
                        <p class="text-slate-500 text-xl">Konsep: Deposit vs Pengeluaran</p>
                    </div>
                    <div class="flex flex-col md:flex-row items-center gap-12">
                        <div class="flex flex-col gap-4">
                            <button onclick="makeDeposit()" class="bg-green-600 hover:bg-green-700 text-white px-8 py-4 rounded-xl font-bold shadow-lg flex items-center gap-3 transform active:scale-95 transition-all w-64">
                                <i data-lucide="plus-circle"></i> BUAT DEPOSIT
                            </button>
                            <button onclick="makeWithdrawal()" class="bg-red-600 hover:bg-red-700 text-white px-8 py-4 rounded-xl font-bold shadow-lg flex items-center gap-3 transform active:scale-95 transition-all w-64">
                                <i data-lucide="minus-circle"></i> PENGELUARAN
                            </button>
                        </div>
                        <div class="relative w-64 h-80 bg-slate-200 rounded-3xl border-4 border-slate-300 flex items-end justify-center overflow-hidden shadow-inner p-4">
                            <div id="bankLevel" class="w-full bg-gradient-to-t from-green-500 to-green-300 rounded-xl transition-all duration-500 relative" style="height: 50%"></div>
                            <div id="coinContainer" class="absolute inset-0 pointer-events-none"></div>
                            <div class="absolute bottom-4 bg-white/80 backdrop-blur px-4 py-1 rounded-full text-slate-800 font-bold shadow-sm">BAKI EMOSI</div>
                        </div>
                    </div>
                </div>`;
            } else if (slide.type === 'credibility_interactive') { 
                contentHtml = `
                <div class="flex flex-col items-center justify-center h-full slide-enter w-full max-w-6xl mx-auto px-4">
                    <h2 class="text-5xl font-black text-white mb-8 text-center">3K KREDIBILITI</h2>
                    <p class="text-slate-400 mb-12">Klik pada kad untuk lihat huraian lanjut.</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 w-full">
                        <!-- Kepakaran -->
                        <div class="relative h-80 w-full perspective-1000 group cursor-pointer" onclick="this.querySelector('.card-inner').classList.toggle('rotate-y-180')">
                            <div class="card-inner relative w-full h-full text-center transition-transform duration-700 transform-style-3d">
                                <!-- Front -->
                                <div class="absolute w-full h-full backface-hidden bg-blue-600 rounded-3xl flex flex-col items-center justify-center p-8 shadow-xl border-2 border-blue-400">
                                    <i data-lucide="briefcase" width="80" height="80" class="text-white mb-6"></i>
                                    <h3 class="text-3xl font-black text-white">KEPAKARAN</h3>
                                    <p class="text-blue-200 mt-4 text-sm">(Klik untuk info)</p>
                                </div>
                                <!-- Back -->
                                <div class="absolute w-full h-full backface-hidden bg-white rounded-3xl flex flex-col items-center justify-center p-8 shadow-xl rotate-y-180 text-slate-800">
                                    <h4 class="font-bold text-xl mb-4 text-blue-600">ILMU & KEMAHIRAN</h4>
                                    <p>Kita tahu buat kerja, bukan sekadar mengarah. Staf respek kerana kita boleh jadi rujukan bila ada masalah.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Konsistensi -->
                        <div class="relative h-80 w-full perspective-1000 group cursor-pointer" onclick="this.querySelector('.card-inner').classList.toggle('rotate-y-180')">
                            <div class="card-inner relative w-full h-full text-center transition-transform duration-700 transform-style-3d">
                                <!-- Front -->
                                <div class="absolute w-full h-full backface-hidden bg-amber-500 rounded-3xl flex flex-col items-center justify-center p-8 shadow-xl border-2 border-amber-300">
                                    <i data-lucide="repeat" width="80" height="80" class="text-white mb-6"></i>
                                    <h3 class="text-3xl font-black text-white">KONSISTENSI</h3>
                                    <p class="text-amber-100 mt-4 text-sm">(Klik untuk info)</p>
                                </div>
                                <!-- Back -->
                                <div class="absolute w-full h-full backface-hidden bg-white rounded-3xl flex flex-col items-center justify-center p-8 shadow-xl rotate-y-180 text-slate-800">
                                    <h4 class="font-bold text-xl mb-4 text-amber-600">CAKAP SERUPA BIKIN</h4>
                                    <p>Peraturan terpakai untuk semua, termasuk diri sendiri. Tidak 'double standard' atau berubah-ubah mood.</p>
                                </div>
                            </div>
                        </div>

                        <!-- Kepedulian -->
                        <div class="relative h-80 w-full perspective-1000 group cursor-pointer" onclick="this.querySelector('.card-inner').classList.toggle('rotate-y-180')">
                            <div class="card-inner relative w-full h-full text-center transition-transform duration-700 transform-style-3d">
                                <!-- Front -->
                                <div class="absolute w-full h-full backface-hidden bg-pink-600 rounded-3xl flex flex-col items-center justify-center p-8 shadow-xl border-2 border-pink-400">
                                    <i data-lucide="heart" width="80" height="80" class="text-white mb-6"></i>
                                    <h3 class="text-3xl font-black text-white">KEPEDULIAN</h3>
                                    <p class="text-pink-200 mt-4 text-sm">(Klik untuk info)</p>
                                </div>
                                <!-- Back -->
                                <div class="absolute w-full h-full backface-hidden bg-white rounded-3xl flex flex-col items-center justify-center p-8 shadow-xl rotate-y-180 text-slate-800">
                                    <h4 class="font-bold text-xl mb-4 text-pink-600">EMPATI TINGGI</h4>
                                    <p>Ambil berat hal kebajikan staf. Manusia bukan robot. Tanya khabar, bukan tanya kerja semata-mata.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>`;
            } else if (slide.type === 'dilemma') {
                contentHtml = `
                <div class="flex flex-col items-center justify-center h-full slide-enter px-4 max-w-5xl mx-auto text-center">
                    <div class="bg-white p-10 rounded-3xl shadow-2xl border-t-8 border-red-600 mb-10 w-full relative">
                         <div class="absolute -top-8 left-1/2 -translate-x-1/2 bg-red-600 text-white px-8 py-2 rounded-full font-bold shadow-lg">KAJIAN KES</div>
                        <h3 class="text-2xl md:text-3xl font-bold text-slate-800 mb-6 leading-relaxed">
                            "Kawan baik minta tolong <span class="text-red-600 underline decoration-wavy">punch out</span> kad sebab nak balik awal."
                        </h3>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 w-full" id="dilemmaChoices">
                        <button onclick="resolveDilemma('FAIL')" class="p-6 bg-slate-200 hover:bg-slate-300 rounded-xl font-bold text-slate-700 transition-all text-lg">A. Tolonglah, kawan susah.</button>
                        <button onclick="resolveDilemma('PASS')" class="p-6 bg-slate-200 hover:bg-slate-300 rounded-xl font-bold text-slate-700 transition-all text-lg">B. Tolak, beri solusi sah.</button>
                    </div>
                    <div id="dilemmaResult" class="hidden mt-6 p-6 rounded-xl text-xl font-bold w-full animate-fade-in"></div>
                </div>`;
            } else if (slide.type === 'closing') {
                contentHtml = `
                <div class="flex flex-col items-center justify-center h-full text-center slide-enter px-4">
                    <i data-lucide="sparkles" width="80" height="80" class="text-amber-400 mb-6 animate-pulse"></i>
                    <h2 class="text-4xl md:text-6xl font-black mb-6 text-white tracking-tight">JADILAH PEMIMPIN IDOLA</h2>
                    <p class="text-2xl text-purple-200 max-w-3xl leading-relaxed mb-12">"Orang lupa apa anda kata, tapi ingat bagaimana anda buat mereka rasa."</p>
                    <div class="p-8 bg-black/30 rounded-3xl backdrop-blur-sm border border-white/10 max-w-md">
                        <h3 class="text-xl font-bold text-white mb-4">REHAT TENGAH HARI</h3>
                        <p class="mt-4 text-sm text-slate-400">Jumpa semula jam 2.30 Petang.</p>
                    </div>
                </div>`;
            }

            container.innerHTML = contentHtml;
            lucide.createIcons();
            updateUI();
        }

        // --- Interactive Functions ---
        function showPieInfo(type) {
            const panel = document.getElementById('pieInfoPanel');
            let content = '';
            
            if (type === 'body') {
                content = `
                <div class="bg-red-50 border-l-8 border-red-500 p-6 rounded-r-xl shadow-lg w-full animate-fade-in">
                    <h3 class="text-4xl font-black text-red-600 mb-2">55% BAHASA BADAN</h3>
                    <p class="text-lg text-slate-700">Visual adalah raja. Postur tubuh, kontak mata, ekspresi wajah, dan pergerakan tangan menyampaikan mesej sebenar sebelum anda membuka mulut.</p>
                </div>`;
            } else if (type === 'tone') {
                content = `
                <div class="bg-teal-50 border-l-8 border-teal-500 p-6 rounded-r-xl shadow-lg w-full animate-fade-in">
                    <h3 class="text-4xl font-black text-teal-600 mb-2">38% NADA SUARA</h3>
                    <p class="text-lg text-slate-700">Bukan apa yang anda cakap, tapi <strong>bagaimana</strong> anda cakap. Intonasi, kelajuan, dan volume suara menentukan emosi mesej.</p>
                </div>`;
            } else if (type === 'words') {
                content = `
                <div class="bg-slate-100 border-l-8 border-slate-400 p-6 rounded-r-xl shadow-lg w-full animate-fade-in">
                    <h3 class="text-4xl font-black text-slate-500 mb-2">7% PERKATAAN</h3>
                    <p class="text-lg text-slate-700">Isi kandungan (content) hanyalah sebahagian kecil. Jika bahasa badan & nada tidak selari dengan perkataan, orang tidak akan percaya.</p>
                </div>`;
            }
            
            panel.innerHTML = content;
        }

        function checkAnswer(answer) {
            const scenario = slides[4].scenarios[currentScenarioIndex];
            const resultDiv = document.getElementById('feedbackResult');
            const nextBtn = document.getElementById('btnNextGame');
            
            if (answer === scenario.correct) {
                resultDiv.innerHTML = `<span class="text-green-400">TEPAT! ${scenario.reason}</span>`;
                resultDiv.classList.remove('hidden');
                
                // Enable next button
                if (nextBtn) {
                    nextBtn.disabled = false;
                    nextBtn.classList.remove('opacity-30', 'cursor-not-allowed');
                    nextBtn.classList.add('animate-pulse');
                }
            } else {
                // Find why it might be wrong (simple logic for now)
                let reason = "Cuba lagi.";
                if (answer === "DIRECTING" && scenario.correct !== "DIRECTING") reason = "Terlalu mengarah untuk situasi ini.";
                else if (answer === "DELEGATING" && scenario.correct !== "DELEGATING") reason = "Belum bersedia untuk dilepaskan sepenuhnya.";
                
                resultDiv.innerHTML = `<span class="text-red-400">KURANG TEPAT. ${reason}</span>`;
                resultDiv.classList.remove('hidden');
            }
        }
        
        function nextGameScenario() {
            if (currentScenarioIndex < 5) {
                currentScenarioIndex++;
                renderSlide();
            } else {
                alert("Tahniah! Anda telah menyelesaikan semua senario doktor kepimpinan.");
            }
        }
        
        function prevGameScenario() {
            if (currentScenarioIndex > 0) {
                currentScenarioIndex--;
                renderSlide();
            }
        }

        // Updated checkSimAnswer to accept index
        window.checkSimAnswer = function(type, index) {
             window.simLastChoiceIndex = index;
             simStep = 1;
             renderSlide();
        }

        function nextSimScenario() {
            if (currentSimIndex < 5) {
                currentSimIndex++;
                simStep = 0;
            } else {
                // End of simulation
                alert("Tahniah! Anda telah menyelesaikan semua situasi cemas.");
                // Optionally go to next slide
                nextSlide();
            }
            renderSlide();
        }
        
        function prevSimScenario() {
            if (currentSimIndex > 0) {
                currentSimIndex--;
                simStep = 0;
                renderSlide();
            }
        }
        
        function resetSimScenario() {
            simStep = 0;
            renderSlide();
        }

        function setSimStep(step) {
            simStep = step;
            renderSlide();
        }
        
        function setBossMode(mode) {
            bossMode = mode;
            renderSlide();
        }

        function makeDeposit() {
            if(bankBalance < 100) bankBalance += 10;
            updateBankVisual();
            const container = document.getElementById('coinContainer');
            const coin = document.createElement('div');
            coin.className = 'absolute left-1/2 w-8 h-8 bg-yellow-400 rounded-full border-2 border-yellow-600 shadow-md coin-drop';
            coin.style.left = `${Math.random() * 60 + 20}%`;
            container.appendChild(coin);
            setTimeout(() => coin.remove(), 1000);
        }

        function makeWithdrawal() {
            if(bankBalance > 0) bankBalance -= 10;
            updateBankVisual();
        }

        function updateBankVisual() {
            const level = document.getElementById('bankLevel');
            if(level) {
                level.style.height = `${bankBalance}%`;
                if(bankBalance < 30) level.className = "w-full bg-red-500 rounded-xl transition-all duration-500 relative";
                else level.className = "w-full bg-gradient-to-t from-green-500 to-green-300 rounded-xl transition-all duration-500 relative";
            }
        }

        function resolveDilemma(choice) {
            const resultDiv = document.getElementById('dilemmaResult');
            const choicesDiv = document.getElementById('dilemmaChoices');
            choicesDiv.classList.add('opacity-50', 'pointer-events-none');
            resultDiv.classList.remove('hidden');
            if (choice === 'FAIL') {
                resultDiv.className = "mt-6 p-6 rounded-xl text-xl font-bold w-full animate-fade-in bg-red-100 text-red-800 border-2 border-red-300";
                resultDiv.innerHTML = "BAHAYA! Integriti pecah, hormat hilang. Anda bersubahat menipu.";
            } else {
                resultDiv.className = "mt-6 p-6 rounded-xl text-xl font-bold w-full animate-fade-in bg-green-100 text-green-800 border-2 border-green-300";
                resultDiv.innerHTML = "TERBAIK! Anda tegas menjaga integriti tetapi masih peduli.";
            }
        }

        function updateUI() {
            document.getElementById('slideCounter').innerText = `SLOT 4 / SLAID ${currentSlide + 1}`;
            const bar = document.getElementById('progressBar');
            bar.innerHTML = slides.map((_, i) => 
                `<div class="h-3 rounded-full transition-all duration-300 ${i === currentSlide ? 'bg-amber-500 w-8 md:w-12 shadow-[0_0_10px_rgba(245,158,11,0.5)]' : 'bg-slate-300 w-2 md:w-4 hover:bg-slate-400 cursor-pointer'}"></div>`
            ).join('');

            const btnPrev = document.getElementById('btnPrev');
            const btnNext = document.getElementById('btnNext');

            btnPrev.disabled = currentSlide === 0;
            btnPrev.classList.toggle('opacity-50', currentSlide === 0);
            btnPrev.classList.toggle('cursor-not-allowed', currentSlide === 0);

            if (currentSlide === slides.length - 1) {
                btnNext.innerHTML = 'Tamat <i data-lucide="check-circle" width="24"></i>';
                btnNext.className = "pointer-events-auto flex items-center gap-3 px-8 py-4 rounded-xl font-bold text-lg transition-all bg-amber-600 text-white hover:bg-amber-700 shadow-xl hover:-translate-y-1";
            } else {
                btnNext.innerHTML = 'Seterusnya <i data-lucide="arrow-right" width="24"></i>';
                btnNext.className = "pointer-events-auto flex items-center gap-3 px-8 py-4 rounded-xl font-bold text-lg transition-all bg-purple-700 text-white hover:bg-purple-800 shadow-xl hover:shadow-purple-300 hover:-translate-y-1";
            }
        }

        function nextSlide() {
            if (currentSlide < slides.length - 1) {
                currentSlide++;
                renderSlide();
            }
        }

        function prevSlide() {
            if (currentSlide > 0) {
                currentSlide--;
                renderSlide();
            }
        }

        document.addEventListener('keydown', (e) => {
            if (e.key === 'ArrowRight' || e.key === ' ') nextSlide();
            if (e.key === 'ArrowLeft') prevSlide();
        });

        renderSlide();
    </script>
</body>
</html>     